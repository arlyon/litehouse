---
title: Quickstart
description: Installing and using Litehouse
---

import { Step, Steps } from 'fumadocs-ui/components/steps';
import { Callout } from 'fumadocs-ui/components/callout';
import { File, Folder, Files } from 'fumadocs-ui/components/files';
import { AppRequestButton } from '@/components/app-request-button';

Litehouse is a lightweight program for home automation. Think of it as a set of
rules you define about what should happen when certain triggers are set. For
example:

<Steps>
<Step>
<h4>If it is 7am...</h4>

Set triggers at arbirary times or when receiving updates from other sources
</Step>
<Step>

<h4>Check the weather for rain</h4>

Use one of many integrations to popular APIs to fetch arbitrary data
</Step>
<Step>

<h4>Send me a text message</h4>

Pick from a variety of actions to interact with the outside world
</Step>
</Steps>

Or, alternatively...

<Steps>
<Step>
<h4>If the washing machine power consumption goes below 5W</h4>

Integrate with a wide range of home automation hardware
</Step>
<Step>

<h4>Flash the lights 10 times in the living room</h4>

Group together commands into macros and execute them in a fault tolerant way
</Step>
</Steps>

Litehouse does all these things securely and efficiently. It is designed to use minimal resources allowing it to be run on any hardware.

## Installation

<Cards>
<Card title="Docker" href="#docker" className="bg-gradient-to-bl dark:from-black dark:to-blue-950 border-blue-600" />
<Card title="Podman" href="#podman" className="bg-gradient-to-bl dark:from-black dark:to-purple-950 border-purple-600" />
<Card title="Server" href="#server" className="bg-gradient-to-bl dark:from-black dark:to-orange-950 border-orange-600"/>
<Card title="App" href="#app" />
</Cards>

### Docker

Getting started with docker is the easiest approach for experienced people, and litehouse is designed work
with docker out of the box.

```bash title="Terminal"
docker run -d\
    --name litehouse\
    -v /path/to/settings.json:/settings.json\
    -v /path/to/schema.json:/schema.json\
    -v /path/to/wasm:/wasm\
    -p 8080:8080\
    ghcr.io/arlyon/litehouse:latest
```

<Callout title="Litehouse Docker Image">
For more information on the Litehouse Docker image, visit the <a href="https://github.com/arlyon/litehouse/pkgs/container/litehouse">Litehouse package registry</a>.
</Callout>

#### Docker Compose

In fact, to make it a little easier, you can also take advantage of the docker-compose file
in the repo.

```yaml title="docker-compose.yaml"
version: "3"
services:
  litehouse:
    image: ghcr.io/arlyon/litehouse:latest
    volumes:
      - /path/to/settings.json:/settings.json
      - /path/to/schema.json:/schema.json
      - /path/to/wasm:/wasm
```

### Podman

Good news! The setup is pretty much the same as docker, but with some extra goodies.

```bash title="Terminal"
podman run -d\
    --name litehouse\
    -v /path/to/settings.json:/settings.json\
    -v /path/to/schema.json:/schema.json\
    -v /path/to/wasm:/wasm\
    -p 8080:8080\
    ghcr.io/arlyon/litehouse:latest
```

#### Podman play kube

An alternative to docker-compose is to use a kubernetes definition file.

```yaml title="kube.yaml"
apiVersion: v1
kind: Pod
metadata:
  name: litehouse
spec:
  containers:
    - name: server
      image: ghcr.io/arlyon/litehouse:latest
      volumes:
        - name: wasm
          hostPath:
            path: /app/wasm
            type: DirectoryOrCreate
        - name: settings
          hostPath:
            path: /app/settings.json
            type: FileOrCreate
```

#### Flatcar Linux / coreOS

With that kubernetes config, you can deploy Litehouse on CoreOS or similar systems, using Butane to generate an Ignition configuration file.
This will automatically create a systemd-backed container with auto-updates (by default daily at midnight).
Here's an example Butane configuration:

```yaml title="litehouse.bu"
variant: fcos
version: 1.4.0
passwd:
  users:
    - name: core
      ssh_authorized_keys:
        - <your ssh key>
      groups:
        - sudo
        - docker
systemd:
  units:
    - name: nftables.service
      enabled: true
storage:
  files:
    - path: /app/settings.json
      contents:
        inline: |
          <insert json file here>
    - path: /var/home/core/.config/containers/systemd/pdrp.kube
      contents:
        inline: |
          [Unit]
          Description=Litehouse server

          [Install]
          WantedBy=default.target

          [Kube]
          Yaml=kube.yaml

          [Container]
          AutoUpdate=registry
    - path: /var/home/core/.config/containers/systemd/kube.yaml
      contents:
        local: kube.yaml
  directories:
    - path: /app/wasm
```

To generate the Ignition file, run:

```bash
podman run --interactive --rm quay.io/coreos/butane:release \
       --pretty --strict < litehouse.bu > config.ign
```

#### Learn more

<Cards>
<Card title="CoreOS and Butane" href="https://docs.fedoraproject.org/en-US/fedora-coreos/producing-ign/#_getting_butane" className="bg-gradient-to-bl dark:from-black dark:to-blue-950 border-blue-600" />
<Card title="Podman Autoupdate" href="https://docs.podman.io/en/latest/markdown/podman-auto-update.1.html" className="bg-gradient-to-bl dark:from-black dark:to-purple-950 border-purple-600" />
<Card title="Podman Quadlet" href="https://docs.podman.io/en/latest/markdown/podman-systemd.unit.5.html" className="bg-gradient-to-bl dark:from-black dark:to-orange-950 border-orange-600"/>
</Cards>

### Server

Installing the server directly can be done using `cargo`, the rust package management tool.
To install cargo, please visit [rustup.rs](https://rustup.rs) and follow the instructions.

```bash title="Terminal"
cargo install litehouse
```

Alternatively, you can install the lastest bleeding edge version with the following
command instead:

```bash title="Terminal"
cargo install --git https://github.com/arlyon/litehouse litehouse
```

### App

<Callout title="Coming soon...">
We would also like to bring a desktop app into the mix. This would allow you to run
litehouse on your laptop with a handy management UI built in.

<hr className="mt-2 mb-2" />

<div className="flex justify-between w-full items-center">
Is this something you want?

<AppRequestButton />

</div>

</Callout>

## Getting Set Up

We recommend running litehouse in its own folder, since it needs a few files
out of the box. To start, let's run a few commands.

```bash title="Terminal"
litehouse init
litehouse search tasmota
tasmota@0.1.0
tasmota@0.1.1
tasmota@0.1.2
litehouse add tasmota@0.1.2
litehouse generate
```

You will now notice a set of files in your folder.

<Files>
  <Folder name="wasm" defaultOpen>
    <File name="tasmota@0.1.2.wasm" />
  </Folder>
  <File name="schema.json" />
  <File name="settings.json" />
</Files>

- the `schema.json` file is generated by litehouse to provide intellisense
  when editing your `settings.json` file
- the `settings.json` file is where you define which plugins to use and how
- the `wasm` folder contains the downloaded plugins

Let's add a plugin [instance](/docs/terminology#instance)!

```diff title="settings.json"
{
  "$schema": "schema.json",
  "plugins": {
+  "light": {
+    "plugin": "tasmota@0.1.2",
+    "config": {
+      "ip": [192,168,1,10]
+    }
+  }
  },
  "imports": [
    "tasmota@0.1.2"
  ]
}
```

Notice that as you type, your editor knows what plugins are available, and what
the config for that plugin is. No more invalid yaml! Let's make sure that we
have everything right.

```bash title="Terminal"
litehouse validate
litehouse run
```

Congrats! You have just run your first litehouse instance.

## What is Next?

<Cards>
  <Card title="ðŸ“¦ Visit the plugin registry" href="/registry" />
  <Card title="ðŸ”€ Learn more about creating rules" href="/docs/rules" />
  <Card title="ðŸ“š View the source code" href="https://github.com/arlyon/litehouse" />
</Cards>
